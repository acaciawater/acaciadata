{% extends 'bootbase.html' %}
{% load staticfiles %}
{% load i18n %}
{% block title %}Grondwatermeetnet {{network.name}}{% endblock title %}
{% block breadcrumbs %}{% endblock %}
{% block brandname %}<div class="navbar-brand"><a href="{{network.homepage}}"><img src="/media/{{network.logo}}"/></a>{% trans "Monitoring network" %} {{network.name}}</div>{% endblock %}
{% block extrastyle %}	
<style>
.btn-file {
	position: relative;
	overflow: hidden;
}

.btn-file input[type=file] {
	position: absolute;
	top: 0;
	right: 0;
	min-width: 100%;
	min-height: 100%;
	font-size: 100px;
	text-align: right;
	filter: alpha(opacity = 0);
	opacity: 0;
	background: red;
	cursor: inherit;
	display: block;
}

input[readonly] {
	background-color: white !important;
	cursor: text !important;
}

.navbar-brand img {
	margin-top: -7px;
	max-height: 32px;
	padding-right: 4px;
}

</style>
{% endblock extrastyle %}
{% block script %}
{{ block.super }}
<script>
	$(document).on(
			'change',
			'.btn-file :file',
			function() {
				var input = $(this), numFiles = input.get(0).files ? input
						.get(0).files.length : 1, label = input.val().replace(
						/\\/g, '/').replace(/.*\//, '');
				input.trigger('fileselect', [ numFiles, label ]);
			});

	$(document).ready(
			function() {
				$('.btn-file :file').on(
						'fileselect',
						function(event, numFiles, label) {
							var input = $(this).parents('.input-group').find(
									':text'), log = numFiles > 1 ? numFiles
									+ ' bestanden geselecteerd' : label;

							if (input.length) {
								input.val(log);
							} else {
								if (log)
									alert(log);
							}
						});
			});
</script>
{% endblock script %}

{% block content %}
	<div class='container-fluid'>
		<div class='row'>
			<div class="col-md-6">
				<h4>Upload van datalogger bestanden</h4>
			</div>
		</div>
		<form action="" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			<div class="error">{{form.errors}}</div>
			<div class="row">
				<div class="col-sm-5">
					<div class="input-group">
						<span class="input-group-btn">
 							<span class="btn btn-primary btn-file"> Browse&hellip; {{form.filename}} </span>
						</span>
						<input type="text" id="text1" class="form-control" readonly>
					</div>
				</div>
				<div class="col-sm-5">
					<button type="submit" class="btn btn-primary">Upload</button>
				</div>
			</div>
			<br>
			<div class="row">
				<div class="col-md-10">
				<p>Selecteer een put/filter voor de logger bestanden: {{form.screen}}&nbsp;&nbsp;(Niet nodig als put en filternummer in de MON bestanden staat)</p>
				<p>Voor Ellitrack bestanden moet de betreffende logger gekoppeld zijn aan een filter</p> 
				<p>Door op Upload te klikken worden de geselecteerde bestanden naar de server gekopieerd en verder verwerkt.<br>
				{% if user.email %}
				Als de verwerking klaar is wordt een email met een rapportage over de verwerking gestuurd naar {{user.email}}.
				{% else %}
				Wij kunnen je geen email sturen met de resultaten van de verwerking van de bestanden omdat je email adres bij ons niet bekend is.
				{% endif %}
				</p>
				</div>
			</div>
		</form>
	</div>
	
{% endblock content %}
